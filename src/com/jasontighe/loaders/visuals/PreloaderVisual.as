package com.jasontighe.loaders.visuals{	import com.jasontighe.loaders.visuals.ILoaderVisual;		import flash.display.DisplayObject;	import flash.display.MovieClip;	import flash.events.Event;		public class PreloaderVisual extends MovieClip implements ILoaderVisual	{				public var animation : MovieClip;		public var back : MovieClip;		protected var _w : uint;		protected var _h : uint;		protected var _frame : uint;		public function PreloaderVisual ()		{			addEventListener( Event.ADDED_TO_STAGE, onAddedToStage );			addEventListener( Event.REMOVED_FROM_STAGE, onRemovedFromStage );		}		public function show ( ) : void		{			}		public function update ( progress : Number ) : void		{			_frame = progress * animation.totalFrames;			if ( _frame < 1 ) _frame = 1;			if ( _frame > animation.totalFrames ) _frame = animation.totalFrames;			animation.gotoAndStop( _frame );		}		public function hide () : void		{			animation.gotoAndStop( _frame );		}		/**		 * 		 * protected methods		 * 		 */		protected function init () : void		{			addEventListeners( );			position( );		}		protected function addEventListeners () : void		{			stage.addEventListener( Event.RESIZE, onResize );		}		protected function position ( ) : void		{			var xPos : int = ( stage.stageWidth - back.width ) / 2;			var yPos : int = ( stage.stageHeight - back.height ) / 2;						x = xPos;			y = yPos;		}		protected function removeEventListeners () : void		{			stage.removeEventListener( Event.RESIZE, onResize );			removeEventListener( Event.ADDED_TO_STAGE, onAddedToStage );			removeEventListener( Event.REMOVED_FROM_STAGE, onRemovedFromStage );		}		/**		 * 		 * event handlers		 * 		 */		protected function onAddedToStage ( e : Event ) : void		{			init( );		}		protected function onRemovedFromStage ( e : Event ) : void		{			removeEventListeners( );		}		protected function onResize ( e : Event ) : void		{			position( );		}	}}